<p-tabView>
    <p-tabPanel header="Ticket">
        <app-manutencao [acoes]='{ incluir: false, atualizar: false, deletar: false, visualizar: false, pesquisar: false, cancelar: true }'>
            <p-card>
                <div [formGroup]='form'>
                    <div class="ui-fluid">
                        <div class="p-grid">
                            <div class='p-col-12 p-md-3'>
                                <app-rotulo rotulo='Número do pedido'>
                                    <input formControlName='codigo_comanda' pInputText type='text' maxlength="40" />
                                </app-rotulo>
                            </div>
                            <div class='p-col-12 p-md-9'>
                            </div>
                            <div class='p-col-12 p-md-4'>
                                <app-rotulo rotulo='Estabelecimentos'>
                                    <app-autocomplete url='estabelecimento/pesquisa' dataKey='id' label='{id} - {nome}' formControlName='estabelecimento'></app-autocomplete>
                                </app-rotulo>
                            </div>
                            <div class='p-col-12 p-md-4'>
                                <app-rotulo rotulo='Cliente'>
                                    <app-autocomplete url='usuario/pesquisa?grupo=CLIENTE' dataKey='id' label='{id} - {nome}' formControlName='usuario'></app-autocomplete>
                                </app-rotulo>
                            </div>
                            <div class='p-col-12 p-md-4'>
                                <app-rotulo rotulo='Mesa/Comanda'>
                                    <app-autocomplete url="estabelecimento/mesa/pesquisa?estabelecimento" dataKey='id' label='{id} - {descricao}' formControlName='mesa'></app-autocomplete>
                                </app-rotulo>
                            </div>
                        </div>
                    </div>
                </div>
            </p-card>
        </app-manutencao>
    </p-tabPanel>
    <p-tabPanel header="Erros de Finalização">
        <p-table [value]="finalizacoes" [resizableColumns]="true" [paginator]="true" [rows]="1000"  [rowHover]="true">
            <ng-template pTemplate="header">
                <tr>
                    <th>Código</th>
                    <th>Mensagem</th>
                    <th>Data e Hora</th>
                    <th style='width: 120px'>Ações</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-f>
                <tr>
                    <td width="10%">{{f.id}}</td>
                    <td>{{f.mensagem}}</td>
                    <td>{{f.data_hora | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                    <td style='text-align: center;'>
                        <a (click)="abrirFinalizacao(f)" title="Visualizar">
                            <span class='fa-light fa-eye' style='font-size: x-large'></span>
                        </a>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-tabPanel>
</p-tabView>
<!--tela de erros finalização ticket-->
<p-dialog [(visible)]="showFinalizacao" modal="modal" [style]="{width: '100vw'}" header="Erro finalização ticket" [closable]="true" [showHeader]="true">
    <div [formGroup]='formFinalizacao'>
        <div class="ui-fluid">
            <div class="p-grid">
                <div class='p-col-12 p-md-12'>
                    <app-rotulo rotulo='Mensagem'>
                        <textarea pInputTextarea formControlName='mensagem' [rows]='10' style="width: 100%; max-width: 100%;"></textarea>
                    </app-rotulo>
                </div>
            </div>
        </div>
    </div>
    <div class='controles'>
        <button pButton type="button" label="OK" (click)="showFinalizacao=false" class="ui-button-success"></button>
    </div>
</p-dialog>